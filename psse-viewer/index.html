<!DOCTYPE html><html> <head><meta charset="utf-8"><title>KPG GeoJSON Viewer</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/psse-viewer/leaflet.css"><!-- Bootstrap Icons CDN --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"><!-- Leaflet.MiniMap CSS --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-minimap/dist/Control.MiniMap.min.css"><script src="/psse-viewer/kpg_presets.js"></script><!-- Include preset definitions --><link rel="stylesheet" href="/psse-viewer/psse_viewer.css"><!-- Link external CSS --><script type="module" src="/_astro/page.CAeE1Kiy.js"></script></head> <body> <div id="top-bar"> <button id="toggle-sidebar">☰</button> <input type="file" id="upload" accept=".geojson,.json" style="margin-left: 12px;"> <span id="loaded-filename" class="loaded-filename-display"></span> <!-- Filename display --> <!-- Simplified top bar for now --> <div style="margin-left: auto; display: flex; align-items: center;"> <input type="text" id="search" placeholder="Search Bus Name/ID, Line From/To/ID..." style="width: 280px; margin-right: 8px;"> <button id="toggle-right-sidebar-button">☰</button> </div> <div id="search-results"></div> <!-- Search results container --> </div> <div id="main-content"> <div id="sidebar"> <div class="sidebar-iconbar"> <button class="sidebar-icon active" data-panel="filters" title="Layers & Filters"> <i class="bi bi-layers"></i> </button> <button class="sidebar-icon" data-panel="popup" title="Popup Display Options"> <i class="bi bi-sliders"></i> </button> </div> <div class="sidebar-layer-title" id="sidebar-layer-title">Layers</div> <div class="sidebar-panel active" id="sidebar-panel-filters"> <details class="sidebar-section" id="section-feature-types" open> <summary class="sidebar-section-header">Feature Types</summary> <div class="sidebar-section-content"> <div id="feature-type-filters" style="display: flex; flex-wrap: wrap; gap: 4px; margin-top: 5px;"> <!-- Replaced buttons with styled labels and checkboxes --> <label class="filter-checkbox-label"> <input type="checkbox" class="filter-checkbox" data-filter-type="featureType" data-value="Bus" checked> Bus
</label> <label class="filter-checkbox-label"> <input type="checkbox" class="filter-checkbox" data-filter-type="featureType" data-value="Generator" checked> Generator
</label> <label class="filter-checkbox-label"> <input type="checkbox" class="filter-checkbox" data-filter-type="featureType" data-value="Branch" checked> Branch (AC)
</label> <label class="filter-checkbox-label"> <input type="checkbox" class="filter-checkbox" data-filter-type="featureType" data-value="DCLine" checked> HVDC Line
</label> <label class="filter-checkbox-label"> <input type="checkbox" class="filter-checkbox" data-filter-type="featureType" data-value="FACTS" checked> FACTS
</label> </div> </div> </details> <details class="sidebar-section" id="section-line-voltages" open> <summary class="sidebar-section-header">Line Voltages (Branch)</summary> <div class="sidebar-section-content"> <div id="line-voltage-filters" style="display: flex; flex-wrap: wrap; gap: 4px; margin-top: 5px;"> <!-- Replaced buttons with styled labels and checkboxes --> <label class="filter-checkbox-label"> <input type="checkbox" class="filter-checkbox" data-filter-type="lineVoltage" data-value="765" checked> 765 kV
</label> <label class="filter-checkbox-label"> <input type="checkbox" class="filter-checkbox" data-filter-type="lineVoltage" data-value="345" checked> 345 kV
</label> <label class="filter-checkbox-label"> <input type="checkbox" class="filter-checkbox" data-filter-type="lineVoltage" data-value="154" checked> 154 kV
</label> </div> </div> </details> <details class="sidebar-section" id="section-bus-voltages" open> <summary class="sidebar-section-header">Bus Voltages</summary> <div class="sidebar-section-content"> <div id="bus-voltage-filters" style="display: flex; flex-wrap: wrap; gap: 4px; margin-top: 5px;"> <!-- Replaced buttons with styled labels and checkboxes --> <label class="filter-checkbox-label"> <input type="checkbox" class="filter-checkbox" data-filter-type="busVoltage" data-value="765" checked> 765 kV
</label> <label class="filter-checkbox-label"> <input type="checkbox" class="filter-checkbox" data-filter-type="busVoltage" data-value="345" checked> 345 kV
</label> <label class="filter-checkbox-label"> <input type="checkbox" class="filter-checkbox" data-filter-type="busVoltage" data-value="154" checked> 154 kV
</label> </div> </div> </details> <details class="sidebar-section" id="section-service-status" open> <summary class="sidebar-section-header">Service Status</summary> <div class="sidebar-section-content"> <div id="service-status-filters" style="margin-top: 5px;"> <div class="status-filter-group" style="margin-bottom: 3px; display: flex; align-items: center;"> <span style="display: inline-block; width: 65px; font-size: 12px;">Bus:</span> <div class="toggle-group"> <button class="toggle-btn" data-status-type="bus" data-status-value="on">ON</button> <button class="toggle-btn" data-status-type="bus" data-status-value="off">OFF</button> <button class="toggle-btn active" data-status-type="bus" data-status-value="all">ALL</button> </div> </div> <div class="status-filter-group" style="margin-bottom: 3px; display: flex; align-items: center;"> <span style="display: inline-block; width: 65px; font-size: 12px;">Generator:</span> <div class="toggle-group"> <button class="toggle-btn" data-status-type="gen" data-status-value="on">ON</button> <button class="toggle-btn" data-status-type="gen" data-status-value="off">OFF</button> <button class="toggle-btn active" data-status-type="gen" data-status-value="all">ALL</button> </div> </div> <div class="status-filter-group" style="margin-bottom: 3px; display: flex; align-items: center;"> <span style="display: inline-block; width: 65px; font-size: 12px;">Lines:</span> <div class="toggle-group"> <button class="toggle-btn" data-status-type="branch" data-status-value="on">ON</button> <button class="toggle-btn" data-status-type="branch" data-status-value="off">OFF</button> <button class="toggle-btn active" data-status-type="branch" data-status-value="all">ALL</button> </div> </div> </div> </div> </details> <details class="sidebar-section" id="section-generator-zone" open> <summary class="sidebar-section-header">Generator Fuel Type</summary> <div class="sidebar-section-content"> <select id="zone-name-filter" style="width: 100%; margin-top: 5px; padding: 4px;"> <option value="">All Fuel Types</option> </select> </div> </details> </div> <div class="sidebar-panel" id="sidebar-panel-popup"> <div id="popup-options" style="margin-top: 0; border-top: none; padding-top: 0;"> <details id="bus-popup-options-details" open> <summary class="sidebar-section-header">Bus Properties</summary> <div style="padding-left: 15px;"> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="Bus" data-type="Bus" checked> Bus Number</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="Name" data-type="Bus" checked> Name</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="num_buses" data-type="Bus"> Number of Buses</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="Base_kV" data-type="Bus" checked> Base kV</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="Voltage_kV" data-type="Bus" checked> Voltage (kV)</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="Zone_Name" data-type="Bus" checked> Zone Name</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="Area_Name" data-type="Bus"> Area Name</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="Pload_MW" data-type="Bus"> P Load (MW)</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="Qload_MVAr" data-type="Bus"> Q Load (MVAr)</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="Type" data-type="Bus"> Type</label> </div> </details> <details id="branch-popup-options-details" open> <summary class="sidebar-section-header">Branch Properties</summary> <div style="padding-left: 15px;"> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="ID" data-type="Branch" checked> Branch ID</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="num_lines" data-type="Branch"> Number of Lines</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="Status" data-type="Branch" checked> Status</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="RATEA" data-type="Branch" checked> Rating (MVA)</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="PCTRATE" data-type="Branch" checked> Loading (%)</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="p_ft" data-type="Branch" checked> P Flow (MW)</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="q_ft" data-type="Branch" checked> Q Flow (MVAr)</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="Base_kV" data-type="Branch" checked> Base kV</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="FromBus" data-type="Branch"> From Bus Number</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="FromName" data-type="Branch"> From Bus Name</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="ToBus" data-type="Branch"> To Bus Number</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="ToName" data-type="Branch"> To Bus Name</label> </div> </details> <details id="generator-popup-options-details" open> <summary class="sidebar-section-header">Generator Properties</summary> <div style="padding-left: 15px;"> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="Bus_Num" data-type="Generator" checked> Bus Number</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="Bus_Name" data-type="Generator" checked> Bus Name</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="Zone_Name" data-type="Generator" checked> Fuel Type</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="Area_Name" data-type="Generator" checked> Area Name</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="Status" data-type="Generator" checked> Status</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="PGen" data-type="Generator" checked> P Generation (MW)</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="QGen" data-type="Generator" checked> Q Generation (MVAr)</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="Pmax" data-type="Generator" checked> P Max (MW)</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="Pmin" data-type="Generator" checked> P Min (MW)</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="QMax" data-type="Generator" checked> Q Max (MVAr)</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="QMin" data-type="Generator" checked> Q Min (MVAr)</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="Generation_Type" data-type="Generator"> Generation Type</label> <label style="font-size: 12px; display: block;"><input type="checkbox" class="popup-prop-toggle" data-prop="Owner_Name" data-type="Generator"> Owner Name</label> </div> </details> </div> </div> <div id="left-resize-handle"></div> </div> <div id="map" tabindex="0"></div> <div id="right-sidebar"> <div id="right-resize-handle"></div> <div class="sidebar-iconbar"> <button class="sidebar-icon active" data-panel="details" title="Details/Selection"> <i class="bi bi-list-ul"></i> </button> <button class="sidebar-icon" data-panel="economics" title="Economics"> <i class="bi bi-cash-coin"></i> </button> <!-- Add more icons as needed --> </div> <div class="sidebar-layer-title" id="right-sidebar-layer-title">Details/Selection</div> <!-- Title will be updated via JavaScript when panel changes --> <div class="sidebar-panel active" id="right-sidebar-panel-details"> <!-- <h3>Details / Selection</h3> --> <select id="preset-select" style="margin-bottom: 8px; width: 100%;"> <option value="">-- Select a preset --</option> </select> <ul id="active-presets" style="margin-bottom: 8px; font-size: 12px; color: #333; padding-left: 0; list-style: none;"></ul> <div id="preset-color-palette" style="display: flex; flex-wrap: wrap; gap: 2px; padding: 2px 0;"></div> <div id="sidebar-button-row" style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 8px;"> <button id="clear-selected">Clear List</button> <button id="reset-colors">Reset Colors</button> <button id="select-all-displayed">Select All Displayed</button> <button id="toggle-pflow" class="toggle">Pflow</button> <button id="toggle-qflow" class="toggle">Qflow</button> <button id="toggle-bus-labels" class="toggle">Bus Labels</button> <button id="toggle-line-labels" class="toggle">Line Labels</button> <button id="export-preset">Export Selected</button> <button id="import-preset-button">Import Preset</button> <input type="file" id="import-preset-file" accept=".json" style="display: none;"> </div> <div id="selected-list" style="flex-grow: 1; overflow-y: auto; margin-top: 10px;"></div> </div> <div class="sidebar-panel" id="right-sidebar-panel-economics" style="display:none;"> <!-- Placeholder for future economics tools --> </div> </div> </div> <script src="/psse-viewer/leaflet.js"></script> <!-- Leaflet.MiniMap JS --> <script type="module" src="/_astro/psse-viewer.astro_astro_type_script_index_0_lang.rP0sGD9_.js"></script> <!-- Leaflet.TextPath JS --> <script type="module" src="/_astro/psse-viewer.astro_astro_type_script_index_1_lang.DfOH1HND.js"></script> <!-- Modular Viewer JS --> <script src="/psse-viewer/_styles.js"></script> <script src="/psse-viewer/_geojson_loader.js"></script> <script src="/psse-viewer/_map_core.js"></script> <script src="/psse-viewer/_filters.js"></script> <script src="/psse-viewer/_labels.js"></script> <script src="/psse-viewer/_selection.js"></script> <script src="/psse-viewer/_search.js"></script> <script src="/psse-viewer/_flow_animation.js"></script> <script src="/psse-viewer/_presets_ext.js"></script> <script src="/psse-viewer/_ui_events.js"></script> <script src="/psse-viewer/_main.js"></script> </body> </html>